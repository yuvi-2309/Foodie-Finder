<mat-card class="review-form-card">
  <mat-card-header>
    <mat-card-title>Write a Review</mat-card-title>
    <mat-card-subtitle>Share your experience with the community</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <form [formGroup]="reviewForm" (ngSubmit)="onSubmit()">
      <div class="rating-input">
        <label>Your Rating *</label>
        <div 
          class="stars"
          (mouseleave)="clearHoverRating()"
        >
          @for (star of [1, 2, 3, 4, 5]; track star) {
            <mat-icon
              (click)="setRating(star)"
              (mouseenter)="setHoverRating(star)"
              [class.selected]="star <= selectedRating()"
            >
              {{ getStarIcon(star) }}
            </mat-icon>
          }
        </div>
        @if (selectedRating() === 0) {
          <span class="rating-hint">Click to rate</span>
        } @else {
          <span class="rating-selected">{{ selectedRating() }} out of 5 stars</span>
        }
      </div>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Your Review</mat-label>
        <textarea
          matInput
          formControlName="content"
          rows="6"
          placeholder="What did you love? What could be better? Help others by sharing your experience..."
        ></textarea>
        @if (getErrorMessage('content')) {
          <mat-error>{{ getErrorMessage('content') }}</mat-error>
        }
      </mat-form-field>

      <div class="form-actions">
        <button mat-raised-button color="primary" type="submit" [disabled]="isSubmitting()">
          @if (isSubmitting()) {
            <span>Submitting...</span>
          } @else {
            <span>Submit Review</span>
          }
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
